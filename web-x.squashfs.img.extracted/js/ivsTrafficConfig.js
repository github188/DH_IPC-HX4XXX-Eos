!function(){define(function(require){function a(a){var b={w_trafficSnapSet_OSDPosition:"黑边位置","conf_image.Font Size":"字体大小",w_trafficSnapSet_more:"更多","conf_image.Top Center":"上方","conf_image.Bottom Center":"下方","conf.Region1":"区域1： OSD选项","conf.Suggest Overlay":"推荐叠加",w_insertFront:"前插",w_insertBack:"后插","com.Modify":"修改","com.Delete":"删除",w_newline:"换行",w_Removeall:"清空","com_osd.TitleBit-1":"未知项","com_osd.TitleBit0":"时间","com_osd.TitleBit1":"地点","com_osd.TitleBit2":"车牌","com_osd.TitleBit3":"车长","com_osd.TitleBit4":"车速","com_osd.TitleBit6":"大车限速","com_osd.TitleBit7":"小车限速","com_osd.TitleBit8":"超速比","com_osd.TitleBit9":"车牌颜色","com_osd.TitleBit10":"车道名","com_osd.TitleBit11":"车身颜色","com_osd.TitleBit12":"车牌类型","com_osd.TitleBit13":"违章类型","com_osd.TitleBit14":"红/黄灯点亮时间","com_osd.TitleBit15":"违章代码","com_osd.TitleBit16":"雷达方向","com_osd.TitleBit17":"设备编号","com_osd.TitleBit18":"防伪码","com_osd.TitleBit19":"车辆大小","com_osd.TitleBit20":"通行方向","com_osd.TitleBit21":"车身深浅色","com_osd.TitleBit22":"星期","com_osd.TitleBit23":"高限速","com_osd.TitleBit24":"低限速","com_osd.TitleBit27":"违停时长","com_osd.TitleBit28":"检定证书编号","com_osd.TitleBit29":"检定单位","com_osd.TitleBit30":"查询网址","com_osd.TitleBit32":"车标","com_osd.TitleBit35":"小车低限速","com_osd.TitleBit36":"大车低限速","com_osd.TitleBit37":"小车高限速","com_osd.TitleBit38":"大车高限速","com_osd.TitleBit40":"通用自定义","com_osd.TitleBit41":"车道自定义","com_osd.TitleBit42":"触发源","com_osd.TitleBit44":"车辆类型","com_osd.TitleBit51":"红灯后时间","com_osd.TitleBit52":"欠速比","com_osd.TitleBit53":"卡口方向","com_osd.TitleBit55":"安全带状态","com_osd.TitleBit56":"遮阳板状态","com_osd.TitleBit57":"车系","com_osd.TitleBit58":"抽烟状态","com_osd.TitleBit59":"打电话状态","com_osd.TitleBit~":"空格","traffic_title.car_length":"车长","traffic_title.car_speed":"车速","traffic_title.over_speed_rate":"超速比","traffic_title.break_rules_code":"违法代码","traffic_title.car_way":"车道","traffic_title.car_body":"车身","traffic_title.plate_color":"车牌","traffic_title.red_light":"红灯","traffic_title.yellow_light":"黄灯","traffic_title.DevSn":"设备编号","traffic_title.deadTime":"检定有效期","traffic_title.limit_speedTop":"高限速","traffic_title.limit_speedBottom":"低限速","traffic_title.counterfeitCode":"防伪码","traffic_title.certificate_num":"检定证书编号","traffic_title.checkupUnit":"检定单位","traffic_title.serchAddress":"查询网址","traffic_title.vehicle_sign":"车标","traffic_title.big_car":"大车","traffic_title.small_car":"小车","traffic_title.trigger_source":"触发源","traffic_title.vehicle_type_title":"车型","traffic_title.red_light_persist":"红灯后"};return b[a]||a}function b(a,b,c){var d=a.value.lens(c),e=c;if(void 0===c&&(e=3),d>b){for(var f=parseInt(b/e),g="";g.lens(c)<=b;)g=a.value.substring(0,f++);a.value=a.value.substring(0,f-2)}}function c(b){var c=arguments[1]?arguments[1]:"OSD",f="MergeOSD"==c?"FUNC_Key_MergeOSD_Mask_Show":"FUNC_Key_OSD_Mask_Show",g="MergeOSD"==c?"FUNC_Key_MergeOSD_Mask_Show1":"FUNC_Key_OSD_Mask_Show1",i=d(f),j=d(g);"string"!=$type(i)&&(i=""),"string"!=$type(j)&&(j="");for(var k=i.length,l=32;l>k;l--)i+="0";i+=j;var m=i.length,n=Page.ivsTrafficConfig.Tab[b].SuggestOSDItems;$("osdCfg_"+b+"_maskItems").innerHTML="",m.times(function(c){var d="osdCfg_"+b+"_mask";if(i.charAt(c)-0){var f=$(d+c+"_li"),g=a("com_osd.TitleBit"+c);if(f)$(d+c).set("text",g),$(d+c).set("title",g);else{var j='<a id="'+(d+c)+'" class="osd-button-order fn-txtoverflow" title="'+g+'" data-type="'+h[c]+'">'+g+"</a>",k=document.createElement("li");k.id=d+c+"_li",k.innerHTML=j,$("osdCfg_"+b+"_maskItems").appendChild(k)}}else e(d+c+"_li"),n.erase(c)}),(45-m).times(function(a){var c="osdCfg_"+b+"_mask";e(c+(m+a)+"_li")});{var o=$unlink(n);n.length}n.each(function(a,b){"|"==a?void 0==n[b-1]&&void 0==n[b+1]&&(a=null):a>=m&&o.erase(a)}),"|"==o[0]&&o.splice(0,1),"|"==o[o.length-1]&&o.splice(o.length-1,1),Page.ivsTrafficConfig.Tab[b].SuggestOSDItems=o;var p='<a id="'+("osdCfg_"+b+"_custom")+'" class="osd-button-order" data-type="%54">'+tl("Custom")+"</a>",q=document.createElement("li");q.id="osdCfg_"+b+"_custom_li",q.innerHTML=p,$("osdCfg_"+b+"_maskItems").appendChild(q)}function d(a){var b={FUNC_Key_OSD_Font_Size_show:"101101",FUNC_Key_Osd_Address_Allowed_Input_Chars:"",FUNC_Key_MergeOSD_Mask_Show:"1110000001000101011000000001",FUNC_Key_MergeOSD_Mask_Show1:"0000000000",FUNC_Key_OSD_Mask_Show:"1110000001000101011000000000",FUNC_Key_OSD_Mask_Show1:"0000000000"};return b[a]}function e(a){jQuery("#"+a).remove()}{var f=require("jsCore/rpc"),g=require("jsCore/plugin");require("jsCore/ability")}!function(){var a=Page.ivsTrafficConfig={Tab:[],isTollGate:!1,init:function(){a.ConfigManager=f.ConfigManager,a.IDevIntelliTracker=f.DevIntelliTracker,a.Tab.evidencePara.init(),a.Tab.imagePara.init(),a.Tab.recordPara.init(),a.Tab.snap.init(),a.bind(),a.render()},translate:function(){$("page_TPivs").translation()},leave:function(){g.hide(),f.DevIntelliTracker.start()},render:function(){isEnable("is_notshow_help")&&$("ivs_help").setStyle("display","none"),Page.ivsTrafficConfig._stopIVS.delay(3e4),$$(".ivs_tab_title_2.ui-tab-current").fireEvent("click")},setGate:function(b){a.isTollGate=b,a.Tab.imagePara._initNewMask()},_onTabTitleClick:function(){var b=$$(".ivs_tab_title_2.ui-tab-current").getProperty("data-for");if(a.Tab[b].leave&&a.Tab[b].leave(),!$(this.id).hasClass("ui-tab-disabled")){var c=this.getProperty("data-for");$$(".ivs_tab_title_2").removeClass("ui-tab-current"),$$(".ivs_tab_con_2").setStyle("display","none"),this.addClass("ui-tab-current"),$("ivs_tab_"+c).setStyle("display","block");var d=this.getProperty("osdType");d&&a.Tab[c].setOSDType(d),a.Tab[c].render()}},_stopIVS:function(){Site.currentPage.is.ivsTrafficConfig&&jQuery('.u-tab.main li[data-for="set"]').hasClass("current")&&(a._stopSingleIVS(),a._stopIVS.delay(3e4))},_stopSingleIVS:function(){Site.currentPage.is.ivsTrafficConfig&&jQuery('.u-tab.main li[data-for="set"]').hasClass("current")&&Page.ivsTrafficConfig.IDevIntelliTracker.stop().fail(function(a){a.error&&269221888==a.error.code?alert(tl("其它用户正在配置！")):WideViewSet.support||alert(tl("Operateingfailure"))})},bind:function(){$$(".ivs_tab_title_2").addEvent("click",a._onTabTitleClick)}}}(),function(){var a=$("ivs_tab_evidencePara"),b=Page.ivsTrafficConfig.Tab.evidencePara={configAG:null,configTG:null,$:function(b){return a.getElements(b)[0]||null},init:function(){b.bind()},initTraffic:function(a){"inited"!=b.initTrafficFlag&&(b.initTrafficFlag="inited",Page.ivsTrafficConfig.setGate("Gate"==a[0].Scene.Detail.Type?!0:!1))},bind:function(){$("ivs_EP_refresh").addEvent("click",function(){b._cclRuleCfg(!0)}),$("ivs_EP_save").addEvent("click",b._postRuleCfg),$("ivs_ep_rule_type").addEvent("change",b._renderRuleElements),attachLimit("ivs_ep_PlateMatch",0,100);var a=$("ivs_ep_tpCode").value;$("ivs_ep_tpCode").addEvent("keyup",function(){var b=promptImportLimt("ivs_ep_tpCode","ivs_ep_tpCode_tip",tl("w_tp_code_tip"),9);0==b&&($("ivs_ep_tpCode").value=a)}),attachLimit("ivs_ep_RoadwayNumber",0,16)},translate:function(){},render:function(){$("video1")&&$("video1").setStyles({top:"0px",left:"0px"}),Page.ivsTrafficConfig._stopSingleIVS(),b._cclRuleCfg(!1)},_renderRuleElements:function(){var a=$("ivs_ep_rule_type").value;$("ivs_ep_uploadAll_enable").checked="all"==b.configAG[0].Scene.Detail.ReportMode?!0:!1,$("ivs_ep_tpCode").value=b.configTG.ViolationCode[a]||"",$("ivs_ep_tpname").value=b.configTG.ViolationCode[a+"ShowName"]||"",$("ivs_ep_tpinfo").value=b.configTG.ViolationCode[a+"Desc"]||"",void 0==b.configAG[0].Scene.Detail.PlateHints&&(b.configAG[0].Scene.Detail.PlateHints=[]),$("ivs_ep_PlateHints").value=b.configAG[0].Scene.Detail.PlateHints.join(" "),$("ivs_ep_PlateMatch").value=void 0===b.configAG[0].Scene.Detail.PlateMatch?80:b.configAG[0].Scene.Detail.PlateMatch,b.configTS[0].Detector&&($("ivs_ep_RoadwayNumber").value=b.configTS[0].Detector[0].RoadwayNumber)},_saveRuleInfo:function(){var a=$("ivs_ep_rule_type").value;b.configAG[0].Scene.Detail.ReportMode=1==$("ivs_ep_uploadAll_enable").checked?"all":"plate";for(var c=1;17>c;c++)b.configAG[0]["Scene"+c]&&(b.configAG[0]["Scene"+c].Detail.ReportMode=1==$("ivs_ep_uploadAll_enable").checked?"all":"plate",b.configAG[0]["Scene"+c].Detail.PlateHints=$("ivs_ep_PlateHints").value.trim().split(" "),b.configAG[0]["Scene"+c].Detail.PlateMatch=$("ivs_ep_PlateMatch").value-0);b.configTG.ViolationCode[a]=$("ivs_ep_tpCode").value,b.configTG.ViolationCode[a+"ShowName"]=$("ivs_ep_tpname").value,b.configTG.ViolationCode[a+"Desc"]=$("ivs_ep_tpinfo").value,b.configAG[0].Scene.Detail.PlateHints=$("ivs_ep_PlateHints").value.trim().split(" "),b.configAG[0].Scene.Detail.PlateMatch=$("ivs_ep_PlateMatch").value-0,b.configTS[0].Detector[0].RoadwayNumber=$("ivs_ep_RoadwayNumber").value-0},_postRuleCfg:function(){b._saveRuleInfo(),Page.ivsTrafficConfig.ConfigManager.setConfig(["VideoAnalyseGlobal","TrafficGlobal","TrafficSnapshotNew"],[b.configAG,b.configTG,b.configTS]).done(function(){remarkDisplay("ivs_ep_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ivs_ep_remark",tl("Saving failure"),3e3,1)})},_cclRuleCfg:function(a){Page.ivsTrafficConfig.ConfigManager.getConfig(["VideoAnalyseGlobal","TrafficGlobal","TrafficSnapshotNew"]).done(function(c){b.configAG=c[0].params.table,b.configTG=c[1].params.table,c[2].result&&(b.configTS=c[2].params.table),b.initTraffic(b.configAG),b._renderRuleElements(),a&&remarkDisplay("ivs_ep_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ivs_ep_remark",tl("Operateingfailure"),3e3,1)})}}}(),function(){var a=$("ivs_tab_imagePara"),b=Page.ivsTrafficConfig.Tab.imagePara={$:function(b){return a.getElements(b)||null},config:[],scene:[],init:function(){a=$("ivs_tab_imagePara"),b.bind(),b.MasktemplateDom=b.$('div[data-template="Mask"]')[0]},translate:function(){},render:function(){Page.ivsTrafficConfig._stopSingleIVS(),b.applyRefresh(!1)},bind:function(){$("ivs_iP_save").addEvent("click",b.applySave),$("ivs_iP_refresh").addEvent("click",function(){b.applyRefresh(!0)}),$("ivs_ip_snap_rule_type").addEvent("change",function(){b._renderDom(),b._renderSnapCount()}),$("ivs_ip_snap_num").addEvent("change",b._snapNumChange),$("ivs_ip_addOsd").addEvent("click",b._osdAndCarinfoLinkage),attachLimit("ivs_ip_snapInterval",1,180),attachLimit("ivs_ip_aInt",0,1440),attachLimit("ivs_ip_SnapTimeOutInterval",600,3600),$("ivs_ip_scene").addEvent("change",b._sceneChange),attachLimit("ivs_ip_snapT_m_1",0,180),attachLimit("ivs_ip_snapT_s_1",0,59),attachLimit("ivs_ip_snapT_m_2",0,180),attachLimit("ivs_ip_snapT_s_2",0,59),attachLimit("ivs_ip_snapT_m_3",0,180),attachLimit("ivs_ip_snapT_s_3",0,59),b.$('div[data-link="MergeSnap"]').addEvent("click",function(){b.slide=new Fx.Slide("MergeSnapLink"),b.slide.toggle(),this.toggleClass("tp-show-more")}),b._initSwitch("ivs_ip_clearAfter0"),$("ivs_ip_scene_copy").addEvent("click",b._copySceneConfig)},_sceneChange:function(){b._renderDom()},_copySceneConfig:function(){var a=$("ivs_ip_scene_copyTo").value,c=$("ivs_ip_scene").value-0;if(a!=c){var d,e,f;for(f=0;f<b.config[4].length;f++)b.config[4][f].PresetID==c&&(e=f),b.config[4][f].PresetID==a&&(d=f);if("all"==a)for(f=0;f<b.config[4].length;f++)e!==f&&(b.config[4][f].SnapShotWithRule=$unlink(b.config[4][e].SnapShotWithRule));else b.config[4][d].SnapShotWithRule=$unlink(b.config[4][e].SnapShotWithRule)}},_osdAndCarinfoLinkage:function(){$("ivs_ip_addOsd").checked?$("ivs_ip_addCarInfo").disabled="":($("ivs_ip_addCarInfo").checked=!1,$("ivs_ip_addCarInfo").disabled="disabled")},_renderSnapCount:function(){switch($("ivs_ip_snap_rule_type").value){case"TrafficParking":$("ivs_ip_tp_si").removeClass("fn-hide"),$$(".ivs_pic_setting select").setProperty("disabled",""),$$(".ivs_pic_setting input").setProperty("disabled","");break;case"TrafficOverLine":case"TrafficRetrograde":case"TrafficU-Turn":case"TrafficCrossLane":default:$("ivs_ip_tp_si").addClass("fn-hide"),$$(".ivs_pic_setting select").setProperty("disabled","disabled"),$$(".ivs_pic_setting input").setProperty("disabled","disabled")}b._syncImageTable()},_snapNumChange:function(){b._newConfig(),b._renderDomDown(),b._syncImageTable()},_syncImageTable:function(){for(var a=b.$("#ivs_ip_snap_num")[0].value,c=b.$("div[data-snapcap]"),d=0;d<c.length;d++){var e=c[d].getProperty("data-snapcap");e.contains(a)?c[d].removeClass("fn-hide"):c[d].addClass("fn-hide")}$$(".TPMosaic").addClass("fn-hide"),$$(".TPMosaic"+a).removeClass("fn-hide")},_renderRuleTypeConfig:function(){},_findConfig:function(){var a=0,c=0,d=-1,e=$("ivs_ip_snap_rule_type").value,f=b._findRealConfig(),g=b.config[4][f].SnapShotWithRule;for(a=g.length,c=0;a>c;c++)if(g[c].RuleType==e){d=c;break}return g[d]},_findRealConfig:function(){var a=b.config[4].length,c=$("ivs_ip_scene").value-0,d=0;for(d=0;a>d;d++)if(b.config[4][d].PresetID==c)return d},_newConfig:function(){var a=b._findConfig(),c=$("ivs_ip_snap_num").value,d=$("ivs_ip_snap_rule_type").value;switch(d){case"TrafficParking":switch(c){case"1":break;case"2":a.SnapShotType=["Near","Far"];break;case"3":a.SnapShotType=["Near","Far","Far"];break;case"4":a.SnapShotType=["Near","Far","Far","Near"]}break;default:switch(c){case"1":break;case"2":a.SnapShotType=["Far","Near"];break;case"3":a.SnapShotType=["Far","Far","Near"];break;case"4":a.SnapShotType=["Far","Far","Far","Near"]}}return a},_saveDom:function(){b.config[2].OSDCustom.General[0].Enable=$("ivs_ip_addOsd").checked,b.config[3].MergeVideoTitleMask=b._setMaskEnable(b.config[3].MergeVideoTitleMask,2,$("ivs_ip_addCarInfo").checked),b._saveNewMaskWrap(),b.config[0][0].PicCompressRate=$("ivs_ip_imageSize").value-0,b.config[0][0].Enable=$("ivs_ip_noPsImage").checked,b.config[0][0].UploadNormalSnap=$("ivs_ip_trueImage").checked,b.config[0][0].FeatureIndex=$("ivs_ip_FeatureIndex").value-0,0!=b.$('input[name="MosaicTwoMethod"]:checked').length&&(b.config[0][0].MosaicTwoMethod=b.$('input[name="MosaicTwoMethod"]:checked')[0].value-0),0!=b.$('input[name="MosaicThreeMethod"]:checked').length&&(b.config[0][0].MosaicThreeMethod=b.$('input[name="MosaicThreeMethod"]:checked')[0].value-0),0!=b.$('input[name="MosaicFourMethod"]:checked').length&&(b.config[0][0].MosaicFourMethod=b.$('input[name="MosaicFourMethod"]:checked')[0].value-0),b._saveDomDown(),b._saveColor(b.config[2]),b._savePoison(b.config[2]),void 0==b.config[2].OSDItemAttr&&(b.config[2].OSDItemAttr=[{},{}]),b.config[2].OSDItemAttr[0].FontSize=$("ivs_ip_FontSize0").value-0,b.config[2].OSDItemAttr[1].FontSize=$("ivs_ip_FontSize1").value-0,void 0==b.config[2].OSDBlackRegion&&(b.config[2].OSDBlackRegion={}),b.config[2].OSDBlackRegion.OSDPosition=$("ivs_ip_OSDBlackPos").value},_saveDomDown:function(){var a=b._findConfig();a.RuleType=$("ivs_ip_snap_rule_type").value,a.RepeatInterval=60*($("ivs_ip_aInt").value-0),a.RepeatIntervalFlag=b._saveSwitch("ivs_ip_clearAfter0"),a.SnapTimeOutInterval=$("ivs_ip_SnapTimeOutInterval").value-0,a.SingleInterval=[],a.SingleInterval[0]="TrafficParking"==$("ivs_ip_snap_rule_type").value?$("ivs_ip_snapInterval").value-0:0,a.SnapShotType=[];var c=$("ivs_ip_snap_num").value,d=0,e=0;for(d=0;c>d;d++)a.SnapShotType[d]=$("ivs_ip_iType_"+d).value;for(e=1;c>e;e++)a.SingleInterval[e]=60*($("ivs_ip_snapT_m_"+e).value-0)+($("ivs_ip_snapT_s_"+e).value-0)},_renderSceneDom:function(){var a=$("ivs_ip_scene");if(select1=$("ivs_ip_scene_copyTo"),a.empty(),select1.empty(),0==b.scene.length)a.options.add(new Option(tl("请先添加场景"),-1)),select1.options.add(new Option(tl("请先添加场景"),-1)),remarkDisplay("ivs_ip_remark",tl("请先添加场景"),3e3,2);else for(var c=0;c<b.scene.length;c++)a.options.add(new Option(b.scene[c].Name,b.scene[c].PresetID)),select1.options.add(new Option(b.scene[c].Name,b.scene[c].PresetID));select1.options.add(new Option(tl("w_ALL"),"all"))},_renderDom:function(){0==b.scene.length?$("ivs_ip_para_wrap").addClass("fn-hide"):($("ivs_ip_para_wrap").removeClass("fn-hide"),$("ivs_ip_addOsd").checked=b.config[2].OSDCustom.General[0].Enable,b.config[2].OSDItemAttr&&($("ivs_ip_FontSize0").value=b.config[2].OSDItemAttr[0].FontSize,$("ivs_ip_FontSize1").value=b.config[2].OSDItemAttr[1].FontSize),b.config[2].OSDBlackRegion&&($("ivs_ip_OSDBlackPos").value=b.config[2].OSDBlackRegion.OSDPosition),b._renderColor(b.config[2]),b._renderPoison(b.config[2]),$("ivs_ip_addCarInfo").checked=b._getMaskEnable(b.config[3].MergeVideoTitleMask,2),b._renderNewMaskWrap(),$("ivs_ip_imageSize").value=b.config[0][0].PicCompressRate,$("ivs_ip_noPsImage").checked=b.config[0][0].Enable,$("ivs_ip_trueImage").checked=b.config[0][0].UploadNormalSnap,$("ivs_ip_FeatureIndex").value=b.config[0][0].FeatureIndex,void 0!=b.config[0][0].MosaicTwoMethod&&(b.$('input[name="MosaicTwoMethod"][value="'+b.config[0][0].MosaicTwoMethod+'"]')[0].checked=!0,b.$('input[name="MosaicThreeMethod"][value="'+b.config[0][0].MosaicThreeMethod+'"]')[0].checked=!0,b.$('input[name="MosaicFourMethod"][value="'+b.config[0][0].MosaicFourMethod+'"]')[0].checked=!0),b._renderDomDown())},_initNewMask:function(){var a=Page.ivsTrafficConfig.isTollGate;if(a){$("newMaskWrap0").style.width="300px",$("newMaskWrap0").empty();var c=$$('form[data-cap="Gate"]')[0];$("newMaskWrap0").inject(c);var d="newMaskWrap0";b._createNewMask("VideoTitleMask",2,tl("车牌号"),d),b._createNewMask("VideoTitleMask",13,tl("车牌颜色"),d),b._createNewMask("VideoTitleMask",11,tl("车身颜色"),d),b._createNewMask("VideoTitleMask1",0,tl("车标"),d),b._createNewMask("VideoTitleMask1",23,tl("安全带"),d,"disabled"),b._createNewMask("VideoTitleMask1",24,tl("遮阳板"),d,"disabled"),b._createNewMask("VideoTitleMask1",12,tl("车辆类型(轿车、面包)"),d),$$('#page_TPivs fieldset[data-cap="Traffic"]').addClass("fn-hide"),$$('#page_TPivs form[data-cap="Gate"]').removeClass("fn-hide")}else;},_createNewMask:function(a,c,d,e,f){var g=b.MasktemplateDom.clone();g.removeProperty("data-template"),g.removeClass("fn-hide");var h="ivs_ip_"+a+c,i=g.getElement("label");i.setProperty("t",d),i.setProperty("for",h);var j=g.getElement("input");"disabled"==f&&j.setProperty("disabled","disabled"),j.setProperty("id",h),j.setProperty("data-num",c),j.setProperty("data-protocol",a),g.translation(),g.inject(e)},_renderNewMaskWrap:function(){for(var a=$$(".newMaskWrap input"),c=0;c<a.length;c++){var d=a[c].getProperty("data-protocol"),e=a[c].getProperty("data-num");a[c].checked=b._getMaskEnable(b.config[3][d],e)}},_saveNewMaskWrap:function(){for(var a=$$(".newMaskWrap input"),c=0;c<a.length;c++){var d=a[c].getProperty("data-protocol"),e=a[c].getProperty("data-num");b.config[3][d]=b._setMaskEnable(b.config[3][d],e,a[c].checked)}},_saveColor:function(a){var b={white:[255,255,255,255],red:[255,0,0,255],yellow:[255,255,0,255],black:[0,0,0,255],blue:[0,0,255,255],green:[0,255,0,255]},c=$("ivs_ip_FontColor0").value,d=$("ivs_ip_FontColor1").value;void 0==a.OSDItemAttr&&(a.OSDItemAttr=[{},{}]),a.OSDItemAttr[0].FontColor=b[c],a.OSDItemAttr[1].FontColor=b[d]},_renderColor:function(a){if(void 0!=a.OSDItemAttr&&void 0!=a.OSDItemAttr[0].FontColor)for(var b=0;2>b;b++){var c=a.OSDItemAttr[b].FontColor.toString(),d="";switch(c){case"255,255,255,255":d="white";break;case"255,0,0,255":d="red";break;case"255,255,0,255":d="yellow";break;case"0,0,0,255":d="black";break;case"0,0,255,255":d="blue";break;case"0,255,0,255":d="green";break;default:d="white"}$("ivs_ip_FontColor"+b).value=d}},_savePoison:function(a){var b={LTop:[0,0,0,0],RTop:[8192,0,0,0],LDown:[0,8192,0,0],RDown:[8192,8192,0,0]},c=$("ivs_ip_osdPosition").value;void 0==a.OSDItemAttr&&(a.OSDItemAttr=[{},{}]),a.OSDItemAttr[1].Position=b[c]},_renderPoison:function(a){if(void 0!=a.OSDItemAttr&&void 0!=a.OSDItemAttr[1].Position){var b=a.OSDItemAttr[1].Position.toString(),c="";switch(b){case"0,0,0,0":c="LTop";break;case"8192,0,0,0":c="RTop";break;case"0,8192,0,0":c="LDown";break;case"8192,8192,0,0":c="RDown";break;default:c="LTop"}$("ivs_ip_osdPosition").value=c}},_initSwitch:function(a){$(a).getElements("div").addEvent("click",function(){$(a).getElements("div").removeClass("choosed"),this.addClass("choosed")})},_renderSwitch:function(a,b){$(a).getElements("div").removeClass("choosed"),b?$(a).getElements(".ui-switch-true")[0].addClass("choosed"):$(a).getElements(".ui-switch-false")[0].addClass("choosed")},_saveSwitch:function(a){var b=!1;return $(a).getElements(".ui-switch-true")[0].hasClass("choosed")&&(b=!0),b},_getMaskEnable:function(a,b){a=void 0==a?0:a;var c="000000000000000000000000000000"+a.toString(2),d=c.charAt(c.length-b-1);return 1==d?!0:!1},_setMaskEnable:function(a,b,c){a=void 0==a?0:a;var d="000000000000000000000000000000"+a.toString(2);d=d.split(""),d[d.length-1-b]=1==c?1:0;var e=parseInt(d.join(""),2);return e},_renderDomDown:function(){var a=b._findConfig();$("ivs_ip_snap_rule_type").value=a.RuleType,b._renderSnapCount(),$("ivs_ip_snapInterval").value=a.SingleInterval[0],$("ivs_ip_snap_num").value=a.SnapShotType.length,b._syncImageTable(),$("ivs_ip_aInt").value=a.RepeatInterval/60,b._renderSwitch("ivs_ip_clearAfter0",a.RepeatIntervalFlag),$("ivs_ip_SnapTimeOutInterval").value=a.SnapTimeOutInterval;var c=a.SingleInterval.length,d=a.SnapShotType.length,e=0;for(e=1;c>e;e++)$("ivs_ip_snapT_m_"+e).value=parseInt(a.SingleInterval[e]/60),$("ivs_ip_snapT_s_"+e).value=a.SingleInterval[e]%60;for(e=0;d>e;e++)$("ivs_ip_iType_"+e).value=a.SnapShotType[e];"MultiSceneExtention"==b.ITS.Category&&"Tour"==b.MultiScene.PriorMode?($("ivs_ip_snap_wrap").addClass("fn-hide"),$$("div[data-snapcap]")[1].addClass("fn-hideX"),$$("div[data-snapcap]")[5].addClass("fn-hideX"),$("ivs_ip_iType_0").removeEvents("change").addEvent("change",function(){var a=this.value,b={Far:"Near",Near:"Far"};$("ivs_ip_iType_1").value=b[a],$("ivs_ip_iType_2").value=a,$("ivs_ip_iType_3").value=b[a]}),$("ivs_ip_iType_1").removeEvents("change").addEvent("change",function(){var a=this.value,b={Far:"Near",Near:"Far"};$("ivs_ip_iType_0").value=b[a],$("ivs_ip_iType_2").value=b[a],$("ivs_ip_iType_3").value=a}),$("ivs_ip_iType_2").removeEvents("change").addEvent("change",function(){var a=this.value,b={Far:"Near",Near:"Far"};$("ivs_ip_iType_0").value=a,$("ivs_ip_iType_1").value=b[a],$("ivs_ip_iType_3").value=b[a]}),$("ivs_ip_iType_3").removeEvents("change").addEvent("change",function(){var a=this.value,b={Far:"Near",Near:"Far"};$("ivs_ip_iType_0").value=b[a],$("ivs_ip_iType_1").value=a,$("ivs_ip_iType_2").value=b[a]})):($("ivs_ip_snap_wrap").removeClass("fn-hide"),$$("div[data-snapcap]")[1].removeClass("fn-hideX"),$$("div[data-snapcap]")[5].removeClass("fn-hideX"),$("ivs_ip_iType_0").removeEvents("change"),$("ivs_ip_iType_1").removeEvents("change"),$("ivs_ip_iType_2").removeEvents("change"),$("ivs_ip_iType_3").removeEvents("change"))},applySave:function(){b._saveDom(),Page.ivsTrafficConfig.ConfigManager.setConfig(["TrafficSnapMosaic","OSD","TrafficSnapshot","SceneSnapShotWithRule"],[b.config[0],b.config[2],b.config[3],b.config[4]]).done(function(){remarkDisplay("ivs_ip_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ivs_ip_remark",tl("Operateingfailure"),3e3,1)})},applyRefresh:function(a){Page.ivsTrafficConfig.ConfigManager.getConfig(["TrafficSnapMosaic","OSD","TrafficSnapshot","SceneSnapShotWithRule","IntelliTrackScene"]).done(function(c){b.config[0]=c[0].params.table,b.config[2]=c[1].params.table,b.config[3]=c[2].params.table,b.config[4]=c[3].params.table,b.scene=c[4].params.table[0].Scene||[],b.MultiScene=c[4].params.table[0].MultiScene||{},b.ITS=c[4].params.table[0],b._renderSceneDom(),b._renderDom(),a&&remarkDisplay("ivs_ip_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ivs_ip_remark",tl("Operateingfailure"),3e3,1)})}}}(),function(){var a=Page.ivsTrafficConfig.Tab.recordPara={TrafficRecord:{},init:function(){$("ivs_RP_tab").removeClass("fn-hide"),a.ConfigManager=f.ConfigManager,a.bind()},render:function(){a._getConfig(!1)},_renderDom:function(){$("ivs_rp_Enable").checked=a.TrafficRecord.Enable,$("ivs_rp_UploadRecordEnable").checked=a.TrafficRecord.UploadRecordEnable},_saveDom:function(){a.TrafficRecord.Enable=$("ivs_rp_Enable").checked,a.TrafficRecord.UploadRecordEnable=$("ivs_rp_UploadRecordEnable").checked},_getConfig:function(b){a.ConfigManager.getConfig("TrafficRecord").done(function(c){a.TrafficRecord=c,a._renderDom(),b!==!1&&remarkDisplay("ivs_rp_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("ivs_rp_remark",tl("Operateingfailure"),3e3,1)})},_setConfig:function(){a._saveDom(),a.ConfigManager.setConfig("TrafficRecord",a.TrafficRecord).done(function(){remarkDisplay("ivs_rp_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("ivs_rp_remark",tl("Saving failure"),3e3,1)})},bind:function(){$("ivs_RP_save").addEvent("click",a._setConfig),$("ivs_RP_refresh").addEvent("click",a._getConfig)}}}(),function(){function h(){$("osdCfg_preview_confirm").removeEvents("click").addEvent("click",u),i(),m()}function i(){if(D.length&&D[0]){var a=D[0].Element;I=a.length-1;var a=j(z[C].OSDOrder);s(a)}}function j(a){var b,c=[];if(-1!==a.indexOf("%y%M%d%h%m%s")){var d;d=-1!==a.indexOf("%s")?{Name:"%y%M%d%h%m%s%S"}:{Name:"%y%M%d%h%m%s"},c.push(d)}return b=a.replace("%y%M%d%h%m%s","").replace("%S","").split("%"),b.each(function(a){if(a){var b={Name:"%"+a};c.push(b)}}),c}function k(a){for(var b=$$("#osdCfg_snap_orderItems li").getProperty("id"),c=0;c<b.length;c++)if(b[c]==a){num=c;break}var d,e=z[C];d=e.OSDOrder.split("%"),d.splice(num+1,1),e.OSDOrder=d.join("%")}function l(a){var b,c,d,e=z[C],f=$$("#osdCfg_snap_orderItems a"),g="";if(f.length){for(b=0;b<f.length;b++)if(f[b].hasClass("osd-order-item-cur")){c=b;break}c++,a=a.replace("%",""),d=e.OSDOrder.split("%"),$("osdCfg_snap_front").checked?d.splice(c,1,a,d[c]):(d.splice(c,1,d[c],a),I=c),g=d.join("%")}else g+=a;e.OSDOrder=g}function m(){var a=z[C].OSDBlackRegion;$("osdCfg_snap_blackRegion").value=a.Height>0?a.OSDPosition:"None",$("osdCfg_snap_blackRegion").fireEvent("change"),$("osdCfg_snap_fontSize").value=z[C].OSDWholeAttr.FontSize;var b=z[C].OSDWholeAttr.FontColor;$("ivs_ipd_fontColor").value=b.slice(0,3).toString();var c=z[C].OSDWholeAttr.Position||[0,0,0,0];$("ivs_ipd_osdPosition").value=c.toString();var d=B[0],e="OSD"==C?"UploadNormalSnap":"Enable";$("ivs_ipd_noPsImage").checked=d[e],$("ivs_ipd_imageSize").value=d.PicCompressRate,$("ivs_ipd_imageResolution").value=d.MosaicReduceRate}function n(){var a=z[C].OSDBlackRegion;"None"==$("osdCfg_snap_blackRegion").value?a.Height=0:(a.Height=32,a.OSDPosition=$("osdCfg_snap_blackRegion").value);var b=z[C].OSDWholeAttr;b.FontSize=$("osdCfg_snap_fontSize").value-0;var c=$("ivs_ipd_fontColor").value.split(",").map(function(a){return a-0});b.FontColor.splice(0,3,c[0],c[1],c[2]),b.Position=$("ivs_ipd_osdPosition").value.split(",").map(function(a){return a-0});var d=B[0],e="OSD"==C?"UploadNormalSnap":"Enable";d[e]=$("ivs_ipd_noPsImage").checked,d.PicCompressRate=$("ivs_ipd_imageSize").value-0,d.MosaicReduceRate=$("ivs_ipd_imageResolution").value-0}function o(){$$("#osdCfg_snap_orderItems .icon-right").each(function(a){"%|"==a.getParent("a").getProperty("data-type")||($("osdCfg_snap_modify").checked?a.removeClass("osd-icon-del").addClass("osd-icon-edit"):a.removeClass("osd-icon-edit").addClass("osd-icon-del"))})}function p(){$("osdCfg_snap_orderItems").innerHTML="",z[C].OSDOrder=""}function q(){l("%|");var a=j(z[C].OSDOrder);s(a)}function r(){l("%~");var a=j(z[C].OSDOrder);s(a)}function s(b){if(0==b.length)return void($("osdCfg_snap_orderItems").innerHTML="");var c=$("osdCfg_snap_modify").checked?"osd-icon-edit":"osd-icon-del";$("osdCfg_snap_orderItems").innerHTML="";var d="";b.each(function(b,e){if(b){var f="";if(c=$("osdCfg_snap_modify").checked?"osd-icon-edit":"osd-icon-del",1==b.NameType)f=tl("Custom");else if("%|"==b.Name)f=a("w_newline"),c="osd-icon-del";else if("%~"==b.Name)f=a("com_osd.TitleBit~"),c="osd-icon-del";else{var g=J.indexOf(b.Name);"%y%M%d%h%m%s"==b.Name&&(g=0),f=a("com_osd.TitleBit"+g)}d+='<li id="'+("osdCfg_snap_order"+e+"_li")+'" class="">',d+='<a class="osd-button-icon fn-width68 fn-txtoverflow" data-type="'+b.Name+'">'+f,d+='<i class="icon-right '+c+'"></i>',d+="</a>",d+="</li>"}}),$("osdCfg_snap_orderItems").set("html",d),t(),$("osdCfg_snap_order"+I+"_li")?$("osdCfg_snap_order"+I+"_li").fireEvent("click"):$("osdCfg_snap_order0_li").fireEvent("click")}function t(){$$("#osdCfg_snap_orderItems li").addEvent("click",function(c){I=this.id.replace(/[^\d]/g,"")-0,$$("#osdCfg_snap_orderItems li a").removeClass("osd-order-item-cur"),this.getFirst("a").addClass("osd-order-item-cur");var f=this.getFirst("a").getProperty("data-type");c=c||event;var g=c&&(c.target||c.srcElement),h=g&&g.className||"";if(h.contains("icon-right")){var i=D[H].Element,j=h.contains("osd-icon-del"),l=h.contains("osd-icon-edit");if(j){k("osdCfg_snap_order"+I+"_li"),e("osdCfg_snap_order"+I+"_li"),I--;var m=$("osdCfg_snap_order"+I+"_li");if(!m){var n=$("osdCfg_snap_orderItems").getFirst("li");I=n?n.id.replace(/[^\d]/g,"")-0:0}m=$("osdCfg_snap_order"+I+"_li"),m&&($$("#osdCfg_snap_orderItems li a").removeClass("osd-order-item-cur"),m.getFirst("a").addClass("osd-order-item-cur"))}else if(l){var o='<label class="ui-label">'+tl("Content")+"</label>";o+='<input id="osdCfg_preview_content" type="text" class="u-input"/>',$("osdCfg_preview_showContent").innerHTML=o;var p=-1,q=tl("Custom"),i=D[H].Element,r=0;if(f="%y"==f?"%y-%M-%d %h:%m:%s":f,i.each(function(a,b){a.Name==f&&(r=b,$("osdCfg_preview_confirm").setProperty("data-index",r))}),0==i[r].NameType){var s=i[r].Name;p=J.indexOf(s),"%y-%M-%d %h:%m:%s"==s&&(p=0),q=a("com_osd.TitleBit"+p)}else $("osdCfg_preview_content").value=i[r].Name;$("osdCfg_preview_item").setProperty("text",q),$("osdCfg_preview_showBeginTime").setStyle("display","none"),$("osdCfg_preview_showCancelTime").setStyle("display","none"),$("osdCfg_preview_prefix").value=i[r].Prefix||"",$("osdCfg_preview_postfix").value=i[r].Postfix||"",$("osdCfg_preview_seperater").value=i[r].SeperaterCount,0==p?($("osdCfg_preview_hasMSecond").checked="%y-%M-%d %h:%m:%s.%S"==s,$("osdCfg_preview_noMSecond").checked=!$("osdCfg_preview_hasMSecond").checked,$("osdCfg_preview_showMSecond").setStyle("display","block")):$("osdCfg_preview_showMSecond").setStyle("display","none"),51==p?($("osdCfg_preview_redTimePos_slct").value=z[C].RedLightTimeDisplay,$("osdCfg_preview_redTimePos").setStyle("display","block")):14===p&&StrOSDParams&&StrOSDParams.charAt(0)?($("osdCfg_preview_redTimePos_slct").value=z[C].RedLightStartTimeDisplay,$("osdCfg_preview_redTimePos").setStyle("display","block")):$("osdCfg_preview_redTimePos").setStyle("display","none");var t=[1,28,29,30];if(t.contains(p))switch($("osdCfg_preview_content").removeEvents(),p){case 1:for(var u=d("FUNC_Key_Osd_Address_Allowed_Input_Chars"),v="\\w\\-",w="^\\w\\-\\u4e00-\\u9fa5",x=u?u.length:0,y=0;x>y;y++)v+="\\"+u.charAt(y),w+="\\"+u.charAt(y);var A=new RegExp("["+v+"]"),B=new RegExp("["+w+"]");$("osdCfg_preview_content").addEvents({keypress:function(a){if(u&&u.length>0){var b=a.code;A.test(String.fromCharCode(b))||a.preventDefault()}else stringInputNS(a)},keyup:function(){B.test(this.value)&&(this.value=this.value.replace(B,"")),b(this,96)},blur:function(){B.test(this.value)&&(this.value=this.value.replace(B,"")),b(this,96)}}),$("osdCfg_preview_content").value=z.DeviceAddress;break;case 28:$("osdCfg_preview_content").style.imeMode="disabled",$("osdCfg_preview_content").addEvents({keypress:function(a){var b=String.fromCharCode(a.code);/[^\(\)\[\]\{\}\w!?@#$%^&*\-/:,.]/g.test(b)&&a.preventDefault()},keyup:function(){b(this,31)},blur:function(){/[^\(\)\[\]\{\}\w!?@#$%^&*\-/:,.]/g.test(this.value)&&(this.value=this.value.replace(/[^\(\)\[\]\{\}\w!?@#$%^&*\-/:,.]/g,"")),b(this,31)}}),$("osdCfg_preview_content").value=E.Calibration.Certificate;break;case 29:$("osdCfg_preview_content").addEvents({keyup:function(){b(this,255)},blur:function(){b(this,255)}}),$("osdCfg_preview_content").value=E.Calibration.Unit;break;case 30:$("osdCfg_preview_content").addEvents({keyup:function(){b(this,255)},blur:function(){b(this,255)}}),$("osdCfg_preview_content").value=E.Address}else-1==p&&$("osdCfg_preview_content").removeEvents();if(18==p){var F=E.Calibration.PeriodOfValidity;F[0].split(" ")[0].split("-").each(function(a,b){$("osdCfg_preview_beginTime"+b).value=a
}),F[1].split(" ")[0].split("-").each(function(a,b){$("osdCfg_preview_cancelTime"+b).value=a}),$("osdCfg_preview_showBeginTime").setStyle("display","block"),$("osdCfg_preview_showCancelTime").setStyle("display","block")}else $("osdCfg_preview_showBeginTime").setStyle("display","none"),$("osdCfg_preview_showCancelTime").setStyle("display","none");$("osdCfg_preview_dialog").style.display="block",G.show(),$("osdCfg_preview_postfix_label").innerText="%y"==this.getFirst().get("data-type")?"时间格式":"后缀"}}})}function u(){var a=D[H].Element,b=$("osdCfg_preview_confirm").getProperty("data-index")-0,c=0==a[b].NameType,d=a[b].Name;if(c)switch(d){case"%19":z.DeviceAddress=$("osdCfg_preview_content").value;break;case"%42":E.Calibration.Certificate=$("osdCfg_preview_content").value;break;case"%43":E.Calibration.Unit=$("osdCfg_preview_content").value;break;case"%44":E.Address=$("osdCfg_preview_content").value;break;case"%59":var e=[$("osdCfg_preview_beginTime0").value-0,$("osdCfg_preview_beginTime1").value-0,$("osdCfg_preview_beginTime2").value-0],f=[$("osdCfg_preview_cancelTime0").value-0,$("osdCfg_preview_cancelTime1").value-0,$("osdCfg_preview_cancelTime2").value-0];if(compareTime(e,f)>0)return void remarkDisplay("osdCfg_preview_remark",tl("w_StartTimeLateEndTime"),3e3,1);var g=E.Calibration.PeriodOfValidity,h=$("osdCfg_preview_beginTime0").value+"-"+$("osdCfg_preview_beginTime1").value+"-"+$("osdCfg_preview_beginTime2").value;h+=" "+g[0].split(" ")[1];var i=$("osdCfg_preview_cancelTime0").value+"-"+$("osdCfg_preview_cancelTime1").value+"-"+$("osdCfg_preview_cancelTime2").value;i+=" "+g[1].split(" ")[1],E.Calibration.PeriodOfValidity=[h,i];break;case"%65":z[C].RedLightTimeDisplay=$("osdCfg_preview_redTimePos_slct").value;break;case"%25":StrOSDParams&&StrOSDParams.charAt(0)&&(z[C].RedLightStartTimeDisplay=$("osdCfg_preview_redTimePos_slct").value)}a[b].Prefix=$("osdCfg_preview_prefix").value,a[b].Postfix=$("osdCfg_preview_postfix").value,a[b].SeperaterCount=$("osdCfg_preview_seperater").value-0,c?a[b].Name.contains("%y-%M-%d %h:%m:%s")&&(a[b].Name=$("osdCfg_preview_hasMSecond").checked?"%y-%M-%d %h:%m:%s.%S":"%y-%M-%d %h:%m:%s"):a[b].Name=$("osdCfg_preview_content").value,G.close()}function v(a){f.ConfigManager.getDefault(["TrafficSnapshotNew"]).done(function(a){a[0].result&&(A=a[0].params.table[0])}),f.ConfigManager.getConfig(["TrafficSnapshotNew","TrafficGlobal","TrafficSnapMosaic"]).done(function(b){x=b[0].params.table,z=x[y],D=z[C].OSDCustomizeSort,E=b[1].params.table,B=b[2].params.table,h(),a!==!1&&remarkDisplay("osdCfg_snap_remark",tl("Operateingsuccess"),3e3,0)}).fail(function(){remarkDisplay("osdCfg_snap_remark",tl("Operateingfailure"),3e3,1)})}function w(){n(),f.ConfigManager.setConfig(["TrafficSnapshotNew","TrafficGlobal","TrafficSnapMosaic"],[x,E,B]).done(function(){remarkDisplay("osdCfg_snap_remark",tl("Succeed in saving configure"),3e3,0)}).fail(function(){remarkDisplay("osdCfg_snap_remark",tl("Saving failure"),3e3,1)})}var x=[],y=0,z={},A={},B=[],C="OSD",D=[],E={},F=0,G=null,H=0,I=0,J=["%y","%19","%09","%11","%05","%06","%30","%31","%32","%58","%04","%12","%57","%07","%25","%18","%33","%28","%41","%34","%03","%35","%36","%37","%38","%39","%40","%59","%42","%43","%44","%45","%46","%47","%48","%49","%50","%51","%52","%53","%54","%55","%56","%60","%61","%62","%63","%64","","","","%65","%66","%67","","%69","%~"],K=Page.ivsTrafficConfig.Tab.snap={SuggestOSDItems:[0,22,1,-1,10,20,14,51,24,23,35,37,36,38,"|",10,2,19,13,11,21,32,44,3,4,8,52,9,42,-1,"|",28,18,29,30,27],init:function(){G=new Dialog("osdCfg_preview_dialog",function(){alert(1)},"osdCfg_preview_confirm","osdCfg_preview_cancel",tl("conf.Modify Info")),G.setPosition(700,150),c("snap"),F=2*$("osdCfg_snap_maskItems").getElements("li").length;var a=d("FUNC_Key_OSD_Font_Size_show"),b=["16","24","32","48","56","64"];a-0?b.each(function(b,c){a.charAt(c)-0&&$("osdCfg_snap_fontSize").options.add(new Option(b,b-0))}):$("osdCfg_snap_showFontSize").style.display="none",K.bind()},leave:function(){g.hide()},setOSDType:function(a){C=a},translate:function(){$("osdCfg_snap_blackRegion_label").set("text",a("w_trafficSnapSet_OSDPosition"));var b=$("osdCfg_snap_blackRegion").getElements("option");b[0].setProperty("text",a("conf_image.Top Center")),b[1].setProperty("text",a("conf_image.Bottom Center")),b[2].setProperty("text",a("None")),$("osdCfg_snap_fontSize_label").set("text",a("conf_image.Font Size")),$("osdCfg_snap_titleNo").set("text",a("conf.Region1")),$("osdCfg_snap_suggest").set("text",a("conf.Suggest Overlay")),$("osdCfg_snap_front_label").set("text",a("w_insertFront")),$("osdCfg_snap_back_label").set("text",a("w_insertBack")),$("osdCfg_snap_modify_label").set("text",a("com.Modify")),$("osdCfg_snap_delete_label").set("text",a("com.Delete")),$("osdCfg_snap_cleanAll").set("text",a("w_Removeall")),$("osdCfg_snap_newLine").set("text",a("w_newline"))},openVideo:function(){g.cover("#ivs_snap_video"),g.SetRegionNum(0),g.SetModuleMode(1),g.ConnectRealVideo(0,1)},render:function(){K.openVideo(),v(!1),c("snap",C),K.bind()},bind:function(){$("osdCfg_snap_suggest").addEvent("click",function(){var a=j(A[C].OSDOrder);s(a),z[C].OSDOrder=A[C].OSDOrder}),$$("#osdCfg_snap_maskItems a").addEvent("click",function(){var a=this.getProperty("data-type");l(a);var b=j(z[C].OSDOrder);s(b)}),$$("#osdCfg_snap_modify, #osdCfg_snap_delete").addEvent("click",o),$("osdCfg_snap_cleanAll").addEvent("click",p),$("osdCfg_snap_newLine").addEvent("click",q),$("osdCfg_snap_block").addEvent("click",r),$("osdCfg_snap_blackRegion").addEvent("change",function(){"None"!==this.value?$("ivs_ipd_fontPosition").addClass("fn-invisib"):$("ivs_ipd_fontPosition").removeClass("fn-invisib")}),$("osdCfg_snap_refresh").addEvent("click",v),$("osdCfg_snap_confirm").addEvent("click",w)}}}();var h={0:"%y",1:"%19",2:"%09",9:"%58",13:"%07",15:"%18",17:"%28",18:"%41",27:"%59"}})}();